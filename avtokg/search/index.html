<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
  </head>
  <body>
    <div>
      <form>
        <label for="brand">Бренд</label>
        <select id="brand" name="brand"></select>

        <label for="model">Модель</label>
        <select id="model" name="model" disabled></select>

        <label for="year">Год</label>
        <select id="year" name="year"></select>

        <label for="price">Цена в $</label>
        <input type="number" id="price-min" name="price-min" placeholder="От" />
        <input type="number" id="price-max" name="price-max" placeholder="До" />
      </form>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="../../js/dropDowns.js"></script>
  <script>
    const mainButton = window.Telegram.WebApp.MainButton;
    mainButton.text = "Найти";
    mainButton.enable();
    mainButton.show();
    mainButton.onClick(function () {
      const data = {
        brand: $("#brand").val(),
        model: $("#model").val(),
        priceMin: parseInt($("#price-min").val(), 10),
        priceMax: parseInt($("#price-max").val(), 10),
        year: $("#year").val(),
      };
      Object.keys(data).forEach(
        (key) => (data[key] = data[key] === "any" ? null : data[key])
      );
      window.Telegram.WebApp.sendData(JSON.stringify(data));
    });
  </script>
</html>
