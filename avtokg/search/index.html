<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../../css/main.css" />
  </head>
  <body>
    <div>
      <form>
        <select id="brand" name="brand"></select>
        <select id="model" name="model" disabled></select>
        <select id="year" name="year"></select>

        <div class="button-group">
          <button type="button" class="button button-pressed" id="today">
            Любая
          </button>
          <button type="button" class="button button-default" id="today">
            Механика
          </button>
          <button type="button" class="button button-default" id="this_week">
            Автомат
          </button>
          <button type="button" class="button button-default" id="this_month">
            Вариатор
          </button>
          <button type="button" class="button button-default" id="custom">
            Робот
          </button>
        </div>

        <div class="button-group">
          <button type="button" class="button button-pressed" id="today">
            Любой
          </button>
          <button type="button" class="button button-default" id="today">
            Левый руль
          </button>
          <button type="button" class="button button-default" id="today">
            Правый руль
          </button>
        </div>

        <label for="price">Максимальный пробег в км.</label>
        <input
          type="number"
          id="mileage-max"
          name="mileage-max"
          placeholder="км."
        />

        <label for="price">Цена в $</label>
        <input type="number" id="price-min" name="price-min" placeholder="От" />
        <input type="number" id="price-max" name="price-max" placeholder="До" />

        <label for="city">Город</label>
        <select id="city" name="city"></select>
      </form>
    </div>
  </body>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="../../js/dropDowns.js"></script>
  <script>
    const mainButton = window.Telegram.WebApp.MainButton;
    mainButton.text = "Найти";
    mainButton.enable();
    mainButton.show();
    mainButton.onClick(function () {
      const data = {
        brand: $("#brand").val(),
        model: $("#model").val(),
        priceMin: parseInt($("#price-min").val(), 10),
        priceMax: parseInt($("#price-max").val(), 10),
        year: $("#year").val(),
      };
      Object.keys(data).forEach(
        (key) => (data[key] = data[key] === "any" ? null : data[key])
      );
      window.Telegram.WebApp.sendData(JSON.stringify(data));
    });
  </script>
</html>
